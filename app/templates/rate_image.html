{% extends "base.html" %} 
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}
    <style>
        /* Button used to open the contact form - fixed at the bottom of the page */
        .open-button {
        background-color: #555;
        color: white;
        padding: 16px 20px;
        border: none;
        cursor: pointer;
        opacity: 0.8;
        position: dynamic;
        }

        /* The popup form - hidden by default */
        .form-popup {
        display: none;
        position: fixed;
        bottom: 0;
        right: 15px;
        border: 3px solid #f1f1f1;
        z-index: 9;
        }

        /* Add styles to the form container */
        .form-container {
        max-width: 500px;
        padding: 10px;
        background-color: white;
        }

        /* Full-width input fields */
        .form-container input[type=text], .form-container input[type=password] {
        width: 100%;
        padding: 15px;
        margin: 5px 0 22px 0;
        border: none;
        background: #f1f1f1;
        }

        /* When the inputs get focus, do something */
        .form-container input[type=text]:focus, .form-container input[type=password]:focus {
        background-color: #ddd;
        outline: none;
        }

        /* Set a style for the submit/login button */
        .form-container .btn {
        background-color: #04AA6D;
        color: white;
        padding: 16px 20px;
        border: none;
        cursor: pointer;
        width: 100%;
        margin-bottom:10px;
        opacity: 0.8;
        }

        /* Add a red background color to the cancel button */
        .form-container .cancel {
        background-color: red;
        }

        /* Add some hover effects to buttons */
        .form-container .btn:hover, .open-button:hover {
        opacity: 1;
        }

        img {
            max-width: 100%;
            height: auto;
        }
    </style>
    <h1>Scan Information</h1>
    <p><strong>Subject:</strong> {{ subject }}</p>
    <p><strong>Scan:</strong> {{ scan }}</p>
    <p><strong>Scene: </strong> {{ scene }} (will be toggable)</p>
    <img src="/static/subjects/HCD_wb1.4.2.pngs-selected/{{filename}}">
    <!-- Button trigger modal -->
    <br>
    <br>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">
        Rate this scan
    </button>
    <hr>
    <a href="{{ url_for('rater') }}">Rate more images</a>
  
    <!-- Modal -->
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Scan Evaluation Form</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>
            <div class="modal-body">
                {{ form.distort_okay.label }}
                {{ form.distort_okay(onchange="showText()") }}
                {{ form.distort_notes() }}
                {{ form.SBF_corruption.label }}
                {{ form.SBF_corruption() }}
                {{ form.full_brain_coverage.label }}
                {{ form.full_brain_coverage() }}
                {{ form.CIFTI_map_typ.label }}
                {{ form.CIFTI_map_typ() }}
                {{ form.dropout.label }}
                {{ form.dropout() }}
                {{ form.notes.label }} <br>
                {{ form.notes() }} <br>
                {{ form.rating.label }}
                {{ form.rating() }}
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
        </div>
    </div>
      
    <script>
        function showText() {
            var distort = document.getElementById('distort_okay').value
            if (distort == 'No'){
                document.getElementById("distort_notes").disabled = false;
            }
            else{
                document.getElementById("distort_notes").disabled = true;
            }
        }
        showText()
    </script>
    <hr>
    <p> The following users rated this image: </p>
    {% for rating in image_ratings %}
        {% include '_ratings.html' %}
    {% endfor %}
{% endblock %}   